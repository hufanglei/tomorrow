---
outline: deep
---

# Web3.0-DApp开发

- 讲师: 千峰- kerwin
- b站地址: https://www.bilibili.com/video/BV1Fd4y1x7jR/?spm_id_from=333.337.search-card.all.click

## 001 课程简介

## 002 初始web3.0

## 003 认识区块链

## 004 以太坊介绍

## 005 DApp简介

## 006 MetaMask

## 007 Ganache

## 008 Web3.js
**中文文档: https://learnblockchain.cn/docs/web3.js**
> Web3.js是一个库，它有很多函数，使用它可以在以太坊生态系统中通过HTTP或IPC与本地或者以太坊远程节点交互，如查看链上信息等 

> 各种高级语言编写的程序可以使用web3 interface来与EVM交互，在此过程中使用是的JSON-RPC(一个无状态且轻量级的远程过程调用(RPC)传送协议，其传递内容透过JSON为主)

**您可以使用web3.is**来读取和写入以太坊区块链，而不是使用ajax从Web服务器读取和写入数据。

![img.png](img.png)


所以web3.js依赖BigNumber Library1，且会自动进行引入。
核心代码
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@4.16.0/dist/web3.min.js"></script>
    
</head>
<body>

    <h1 id="title"></h1>

    <input type="text" id="toAccount">
    <button id="send">发送</button>

    <script>
        // 连接到以太坊网络
        // const web3 = new Web3('https://mainnet.infura.io/v3/your-infura-project-id');
        var web3 = new Web3(Web3.givenProvider || 'http://localhost:7545');
        // var web3 = new Web3(Web3.givenProvider || "ws://localhost:7545");

        web3.eth.getBlockNumber().then(res=>{
            console.log(res);
        });

        web3.eth.getChainId().then(res=>{
            console.log(res);
        });

        web3.eth.getBalance("0xACaA8d29f7B3d5ECCd65b75xxxxxxxxxx").then(res=>{
            console.log(res);
            // 转换单位
            console.log(web3.utils.fromWei(res, "ether"));
        });

        // 使用 promise
        // web3.eth.sendTransaction({
        //     from: '0x270871c6dc7bA8e8Dxxxxxxxxxxxx',
        //     to: '0xACaA8d29f7B3d5ECCd65b7xxxxxxxxxx',
        //     value: web3.utils.toWei("1", "ether")
        // })
        // .then(function(receipt){
        //     console.log("转完了!")
        // });

        // 先授权
        // web3.eth.requestAccounts().then(res=>{
        //     console.log("授权", res);

        //     title.innerHTML = res[0];
        // });

        // 获取账号

        web3.eth.getAccounts().then(res=>{            
            console.log('-----',res,'---===');
            title.innerHTML = res[0];
        });


        send.onclick = function(){
            // 获取输入框的值
            var toAccount = document.getElementById("toAccount").value;
            console.log(toAccount);

            // 转账
            web3.eth.sendTransaction({
                from: title.innerHTML,
                to: toAccount,
                value: web3.utils.toWei("1", "ether")
            })
            .then(function(receipt){
                console.log("转完了!")
            });
        }


    </script>
    
</body>
</html>
```

## 009 编写智能合约 - 入门

智能合约
- 1. Remix IDE
  > RemixIDE是开发以太坊智能合约的在线IDE工具，部署简单的智能合约非常方便Remixt址:https://remix.ethereum.org/
- 2.Truffle
   >Truffle是一个世界级的智能合约开发框架，专门为智能合约而生，
   ·管理智能合约的生命周期
   ·自动化合约测试
   。可编程，可部署，可发布合约
   ·不用过多的关注网络管理
   。强大的交互式控制台

目录结构:
- contracts/:存放solidity智能合约文件
- migrations/:truffle使用migration system 来控制合约的部署。
- test/:测试文件存放文字(javascript or solidity)
- truffle-config.js:配置文件